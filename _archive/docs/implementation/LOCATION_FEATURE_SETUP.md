# åœ°å€åŠŸèƒ½è®¾ç½®æŒ‡å—

## åŠŸèƒ½æ¦‚è¿°

LocationInput ç»„ä»¶é›†æˆäº†é«˜å¾·åœ°å›¾ APIï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **åœ°å€è‡ªåŠ¨è¡¥å…¨**ï¼šè¾“å…¥æ—¶æ˜¾ç¤ºåœ°å€å»ºè®®
2. **åœ°å›¾è·³è½¬**ï¼šç‚¹å‡» Go æŒ‰é’®è·³è½¬åˆ°é«˜å¾·åœ°å›¾æˆ– Google Maps
3. **æ™ºèƒ½å¹³å°è¯†åˆ«**ï¼šè‡ªåŠ¨è¯†åˆ«ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯ï¼Œä½¿ç”¨ä¸åŒè·³è½¬ç­–ç•¥

## ç”³è¯·é«˜å¾·åœ°å›¾ API Key

### 1. æ³¨å†Œé«˜å¾·å¼€æ”¾å¹³å°è´¦å·

è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°æ§åˆ¶å°](https://console.amap.com/)

### 2. åˆ›å»ºåº”ç”¨

1. ç™»å½•åè¿›å…¥"åº”ç”¨ç®¡ç†" â†’ "æˆ‘çš„åº”ç”¨"
2. ç‚¹å‡»"åˆ›å»ºæ–°åº”ç”¨"
3. å¡«å†™åº”ç”¨åç§°ï¼š`ReMarkable`
4. åº”ç”¨ç±»å‹ï¼šé€‰æ‹©"Web æœåŠ¡"

### 3. æ·»åŠ  Key

1. åœ¨åº”ç”¨è¯¦æƒ…é¡µï¼Œç‚¹å‡»"æ·»åŠ  Key"
2. Key åç§°ï¼š`ReMarkable-Web-Service`
3. æœåŠ¡å¹³å°ï¼šé€‰æ‹© **WebæœåŠ¡**
4. ç‚¹å‡»"æäº¤"

### 4. è·å– API Key

åˆ›å»ºæˆåŠŸåä¼šæ˜¾ç¤ºä¸€ä¸ªå½¢å¦‚ `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6` çš„ Key

## é…ç½®é¡¹ç›®

### 1. åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env
```

### 2. é…ç½® API Key

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå°† `YOUR_AMAP_KEY_HERE` æ›¿æ¢ä¸ºå®é™…çš„ Keyï¼š

```env
VITE_AMAP_KEY=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
```

### 3. æ›´æ–° LocationInput ç»„ä»¶

æ‰“å¼€ `src/components/common/LocationInput.tsx`ï¼Œä¿®æ”¹ç¬¬ 29 è¡Œï¼š

**ä¿®æ”¹å‰ï¼š**
```typescript
const AMAP_KEY = 'YOUR_AMAP_KEY';
```

**ä¿®æ”¹åï¼š**
```typescript
const AMAP_KEY = import.meta.env.VITE_AMAP_KEY || 'YOUR_AMAP_KEY';
```

### 4. é‡å¯å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

## API é…é¢è¯´æ˜

é«˜å¾·åœ°å›¾å…è´¹é…é¢ï¼ˆä¸ªäººå¼€å‘è€…è®¤è¯ï¼‰ï¼š

- **å…è´¹é¢åº¦**ï¼š300,000 æ¬¡/å¤©
- **å¹¶å‘é™åˆ¶**ï¼š200 æ¬¡/ç§’
- **ä½¿ç”¨çš„ API**ï¼š
  - è¾“å…¥æç¤º API (`/v3/assistant/inputtips`)

å¯¹äº ReMarkable çš„ä½¿ç”¨åœºæ™¯ï¼Œå…è´¹é…é¢å®Œå…¨è¶³å¤Ÿã€‚

## åŠŸèƒ½æµ‹è¯•

### 1. åœ°å€è‡ªåŠ¨è¡¥å…¨æµ‹è¯•

1. æ‰“å¼€äº‹ä»¶ç¼–è¾‘å¼¹çª—
2. åœ¨"åœ°ç‚¹"è¾“å…¥æ¡†è¾“å…¥å…³é”®è¯ï¼Œå¦‚"åŒ—äº¬å¤§å­¦"
3. åº”è¯¥çœ‹åˆ°ä¸‹æ‹‰å»ºè®®åˆ—è¡¨
4. ç‚¹å‡»å»ºè®®é¡¹ï¼Œåœ°å€è‡ªåŠ¨å¡«å……

### 2. åœ°å›¾è·³è½¬æµ‹è¯•

1. è¾“å…¥æˆ–é€‰æ‹©ä¸€ä¸ªåœ°å€
2. ç‚¹å‡» ğŸ—ºï¸ Go æŒ‰é’®
3. **ç§»åŠ¨ç«¯**ï¼šåº”è¯¥å°è¯•å”¤èµ·é«˜å¾·åœ°å›¾ APPï¼Œè‹¥æœªå®‰è£…åˆ™æ‰“å¼€ç½‘é¡µç‰ˆ
4. **æ¡Œé¢ç«¯**ï¼šåº”è¯¥åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€é«˜å¾·åœ°å›¾ç½‘é¡µç‰ˆ

## æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ²¡æœ‰åœ°å€å»ºè®®

**æ£€æŸ¥é¡¹**ï¼š
- ç¡®è®¤ `.env` æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
- ç¡®è®¤ API Key æœ‰æ•ˆï¼ˆåœ¨é«˜å¾·æ§åˆ¶å°æ£€æŸ¥ï¼‰
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹ Network æ ‡ç­¾æ˜¯å¦æœ‰è¯·æ±‚å¤±è´¥
- ç¡®è®¤è¾“å…¥å­—ç¬¦æ•° â‰¥ 2ï¼ˆä½äº2ä¸ªå­—ç¬¦ä¸ä¼šè§¦å‘æœç´¢ï¼‰

### é—®é¢˜2ï¼šAPI è¯·æ±‚å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- API Key æ— æ•ˆæˆ–å·²è¿‡æœŸ
- è¶…å‡ºé…é¢é™åˆ¶ï¼ˆæŸ¥çœ‹é«˜å¾·æ§åˆ¶å° â†’ æ•°æ®ç»Ÿè®¡ï¼‰
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
```javascript
// æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œæ£€æŸ¥é”™è¯¯ä¿¡æ¯
// LocationInput ç»„ä»¶ä¼šè¾“å‡ºè°ƒè¯•æ—¥å¿—ï¼š
// [LocationInput] Failed to fetch suggestions: ...
```

### é—®é¢˜3ï¼šGo æŒ‰é’®æ— å“åº”

**æ£€æŸ¥é¡¹**ï¼š
- ç¡®è®¤åœ°å€è¾“å…¥æ¡†æœ‰å†…å®¹ï¼ˆç©ºå€¼æ—¶æŒ‰é’®åº”è¯¥æ˜¯ç¦ç”¨çŠ¶æ€ï¼‰
- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ‹¦æˆªå¼¹çª—ï¼ˆæ¡Œé¢ç«¯ï¼‰
- ç§»åŠ¨ç«¯æ£€æŸ¥æ˜¯å¦å®‰è£…é«˜å¾·åœ°å›¾ APP

## å›½é™…åŒ–æ”¯æŒ

å¦‚éœ€æ”¯æŒ Google Mapsï¼ˆå›½å¤–ç”¨æˆ·ï¼‰ï¼š

```typescript
// ä¿®æ”¹ handleOpenInMap å‡½æ•°
const handleOpenInMap = () => {
  if (!value) return;
  
  const encoded = encodeURIComponent(value);
  
  // æ ¹æ®åœ°åŒºé€‰æ‹©åœ°å›¾æœåŠ¡
  const isChinaMainland = /* æ£€æµ‹é€»è¾‘ */;
  
  if (isChinaMainland) {
    // ä½¿ç”¨é«˜å¾·åœ°å›¾
    window.open(`https://uri.amap.com/marker?address=${encoded}`, '_blank');
  } else {
    // ä½¿ç”¨ Google Maps
    window.open(`https://www.google.com/maps/search/${encoded}`, '_blank');
  }
};
```

## å‚è€ƒæ–‡æ¡£

- [é«˜å¾·åœ°å›¾ Web æœåŠ¡ API](https://lbs.amap.com/api/webservice/summary)
- [è¾“å…¥æç¤º API æ–‡æ¡£](https://lbs.amap.com/api/webservice/guide/api/inputtips)
- [é«˜å¾·åœ°å›¾ URI API](https://lbs.amap.com/api/amap-mobile/guide/android/marker)
