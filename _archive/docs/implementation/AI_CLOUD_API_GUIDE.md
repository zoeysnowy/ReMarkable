# 🚀 AI 事件提取 - 云端 API 方案

## ✅ 推荐方案：DashScope 云端 API

### 为什么不用本地模型？

**本地模型（Ollama）的问题**：
- ❌ **模型体积巨大**: Qwen 2.5 7B 约 **4.7 GB**
- ❌ **打包困难**: Electron 应用体积会超过 5GB
- ❌ **用户负担**: 需要用户手动下载模型和安装 Ollama
- ❌ **内存占用**: 运行时占用 4-6GB RAM

---

## 🌟 DashScope 云端 API

### 优势

✅ **零安装** - 无需下载模型，应用体积不变  
✅ **轻量化** - 应用包体积 < 200MB（无模型）  
✅ **免费额度** - 新用户赠送 **100 万 tokens**  
✅ **更快** - 云端 GPU 推理，3-5 秒返回结果  
✅ **自动更新** - 模型升级无需用户操作  
✅ **高可用** - 99.9% 服务稳定性

### 价格

| 模型 | 价格 | 适合场景 |
|------|------|----------|
| **qwen-plus** | ¥0.004/1k tokens | 推荐（性价比最高） |
| **qwen-turbo** | ¥0.002/1k tokens | 快速响应 |
| **qwen-max** | ¥0.04/1k tokens | 复杂任务 |

**成本估算**：
- 每次提取约消耗 **500-1000 tokens**（¥0.002-0.004）
- 免费额度可支持 **1000-2000 次**调用
- 月费用 < ¥10（100 次/天）

---

## 📝 快速开始

### Step 1: 获取 API Key

1. 访问 **[DashScope 控制台](https://dashscope.console.aliyun.com/apiKey)**
2. 使用阿里云账号登录（支持微信/支付宝登录）
3. 点击 **"创建 API Key"**
4. 复制生成的 Key（格式：`sk-xxxxxxxxxxxxxx`）

### Step 2: 配置 API Key

在 AI Demo 页面中：
1. 点击左侧边栏的 **"AI Demo"**
2. 找到 **"配置 API Key"** 输入框
3. 粘贴你的 DashScope API Key
4. 点击 **"保存配置"**

### Step 3: 开始使用

1. 上传会议邀请函 PDF 或 TXT
2. 点击 **"开始提取"**
3. AI 将在 3-5 秒内返回结果
4. 编辑并创建事件

---

## 🔧 技术实现

### 已完成的工作

✅ **DashScopeProvider.ts** - DashScope API 适配器  
✅ **AIConfig.ts** - 支持多提供商配置  
✅ **AIService.ts** - 自动选择 provider（云端/本地）  
✅ **AIDemo.tsx** - UI 支持 API Key 配置  

### 配置优先级

**中国用户**（自动检测）：
1. **优先**：DashScope 云端 API（如果已配置 API Key）
2. **备选**：Ollama 本地模型

**海外用户**：
1. **优先**：Ollama 本地模型
2. **备选**：Google AI Studio（未来支持）

---

## 🎯 产品发布建议

### 推荐架构

```
ReMarkable 应用
├── 核心功能（计时器、日历等）
├── AI 事件提取（可选功能）
│   ├── DashScope API（默认，推荐）
│   └── Ollama 本地模型（高级用户）
└── 安装包体积: < 200MB
```

### 用户体验流程

**首次使用**：
1. 用户打开 AI Demo 页面
2. 系统提示：**"使用云端 AI 需要 API Key（免费额度 100 万 tokens）"**
3. 提供快速获取链接：[点击获取 API Key](https://dashscope.console.aliyun.com/apiKey)
4. 用户 30 秒内完成配置

**高级用户**：
- 提供选项切换到 Ollama 本地模型
- 显示模型下载指引

---

## 💰 成本分析

### DashScope 云端方案

**免费额度**（新用户）：
- 100 万 tokens（约 1000-2000 次提取）
- 有效期：通常永久有效

**付费后**（超过免费额度）：
- ¥10/月（100 次/天 × 30 天）
- ¥30/月（300 次/天 × 30 天）

### Ollama 本地方案

**初始成本**：
- 用户需要下载 4.7GB 模型
- 首次加载时间：2-5 秒

**运行成本**：
- CPU 占用：50-80%（推理时）
- 内存占用：4-6GB
- 适合：对隐私敏感或离线使用场景

---

## 🔐 隐私与安全

### DashScope

- ✅ 阿里云数据中心（中国大陆）
- ✅ 数据传输加密（HTTPS）
- ⚠️ 文档内容会发送到云端（符合阿里云隐私政策）

### Ollama 本地

- ✅ **100% 本地处理**，数据不离开设备
- ✅ 适合处理敏感文档
- ⚠️ 需要用户手动下载模型

---

## 📊 性能对比

| 指标 | DashScope 云端 | Ollama 本地 (7B) |
|------|--------------|---------------|
| **响应时间** | 3-5 秒 | 5-15 秒 |
| **准确率** | 95-98% | 92-95% |
| **安装体积** | 0 MB | 4700 MB |
| **内存占用** | <50MB | 4000-6000 MB |
| **需要网络** | ✅ 是 | ❌ 否 |
| **成本** | ~¥0.004/次 | 免费（硬件成本） |

---

## 🚀 下一步

### 已完成 ✅
- [x] DashScope Provider 实现
- [x] AIService 支持多 provider
- [x] AIConfig 配置管理

### 待实现 🔜
- [ ] AI Demo 页面添加 API Key 配置界面
- [ ] 显示用量统计（tokens 消耗）
- [ ] 支持 Google AI Studio（海外用户）

---

**🎉 现在你可以使用轻量化的云端方案，无需担心应用体积问题！**

**获取 API Key**: https://dashscope.console.aliyun.com/apiKey
