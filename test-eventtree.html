<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EventTree æµ‹è¯• - å †å å¡ç‰‡äº¤äº’</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f9fafb;
      padding: 40px 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      font-size: 32px;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 12px;
    }

    .description {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 40px;
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }

    .demo-title {
      font-size: 20px;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 20px;
    }

    .demo-content {
      min-height: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f9fafb;
      border-radius: 8px;
      padding: 40px;
    }

    .instructions {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }

    .instructions h3 {
      font-size: 16px;
      font-weight: 600;
      color: #1e40af;
      margin-bottom: 12px;
    }

    .instructions ul {
      list-style: none;
      padding-left: 0;
    }

    .instructions li {
      font-size: 14px;
      color: #1e40af;
      margin-bottom: 8px;
      padding-left: 20px;
      position: relative;
    }

    .instructions li::before {
      content: 'âœ“';
      position: absolute;
      left: 0;
      color: #3b82f6;
      font-weight: bold;
    }

    .status {
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 8px;
      padding: 16px;
      margin-top: 20px;
      text-align: center;
    }

    .status p {
      font-size: 14px;
      color: #92400e;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸŒ² EventTree æµ‹è¯•é¡µé¢</h1>
    <p class="description">
      æµ‹è¯•åŒå‘é“¾æ¥å †å å¡ç‰‡äº¤äº’å’Œæ‚¬åœå±•å¼€åŠ¨ç”»
    </p>

    <!-- Demo 1: EventTree Canvas -->
    <div class="demo-section">
      <h2 class="demo-title">EventTree Canvas é¢„è§ˆ</h2>
      <div class="demo-content">
        <div id="eventtree-root" style="width: 100%; height: 100%;"></div>
      </div>

      <div class="instructions">
        <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
        <ul>
          <li>å°†é¼ æ ‡æ‚¬åœåœ¨äº‹ä»¶èŠ‚ç‚¹ä¸Š</li>
          <li>è§‚å¯Ÿå †å çš„é“¾æ¥å¡ç‰‡ä»æ”¶çº³æ€æ‰‡å½¢å±•å¼€</li>
          <li>ç‚¹å‡»é“¾æ¥å¡ç‰‡æŸ¥çœ‹å¯¹åº”äº‹ä»¶</li>
          <li>æ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´å¸ƒå±€</li>
          <li>ä½¿ç”¨ç¼©æ”¾æ§åˆ¶å™¨è°ƒæ•´è§†å›¾</li>
        </ul>
      </div>

      <div class="status">
        <p>âš ï¸ æ­¤é¡µé¢éœ€è¦é›†æˆåˆ° React åº”ç”¨ä¸­æ‰èƒ½æ­£å¸¸è¿è¡Œ</p>
      </div>
    </div>

    <!-- Demo 2: ä½¿ç”¨è¯´æ˜ -->
    <div class="demo-section">
      <h2 class="demo-title">ğŸ”§ é›†æˆæŒ‡å—</h2>
      
      <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">1. åŸºç¡€ä½¿ç”¨</h3>
      <pre style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 6px; overflow-x: auto; font-size: 13px; line-height: 1.6; margin-bottom: 20px;"><code>import { EventTreeCanvas } from './components/EventTree/EventTreeCanvas';
import { EventService } from './services/EventService';

function MyComponent() {
  const events = EventService.getAllEvents();
  
  return (
    &lt;EventTreeCanvas
      rootEventId="event-123"
      events={events}
      onEventClick={(event) =&gt; {
        console.log('ç‚¹å‡»äº‹ä»¶:', event);
      }}
      onCheckboxChange={(event, isCompleted) =&gt; {
        EventService.updateEvent(event.id, { isCompleted });
      }}
    /&gt;
  );
}</code></pre>

      <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">2. åœ¨ EventEditModal ä¸­é›†æˆ</h3>
      <pre style="background: #1f2937; color: #e5e7eb; padding: 16px; border-radius: 6px; overflow-x: auto; font-size: 13px; line-height: 1.6; margin-bottom: 20px;"><code>// åœ¨ EventEditModal çš„å…³è”åŒºåŸŸæ·»åŠ  EventTree æŒ‰é’®
&lt;button onClick={() => setShowEventTree(true)}&gt;
  ğŸŒ² æŸ¥çœ‹äº‹ä»¶æ ‘
&lt;/button&gt;

{showEventTree && (
  &lt;EventTreeCanvas
    rootEventId={event.id}
    events={allEvents}
    onEventClick={handleEventClick}
  /&gt;
)}</code></pre>

      <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">3. æ ¸å¿ƒç‰¹æ€§</h3>
      <ul style="list-style: none; padding-left: 0;">
        <li style="margin-bottom: 12px; padding-left: 24px; position: relative;">
          <strong style="color: #3b82f6; position: absolute; left: 0;">ğŸ¦´</strong>
          <strong>åˆšæ€§éª¨æ¶ (Rigid Bone)</strong><br>
          <span style="color: #6b7280; font-size: 14px;">parentEventId/childEventIds å æ®ç”»å¸ƒç©ºé—´ï¼Œæ˜¾ç¤ºä¸ºè¿çº¿</span>
        </li>
        <li style="margin-bottom: 12px; padding-left: 24px; position: relative;">
          <strong style="color: #ef4444; position: absolute; left: 0;">ğŸ©¸</strong>
          <strong>æŸ”æ€§è¡€ç®¡ (Flexible Vessels)</strong><br>
          <span style="color: #6b7280; font-size: 14px;">linkedEventIds å †å åœ¨èƒŒåï¼Œæ‚¬åœæ—¶æ‰‡å½¢å±•å¼€</span>
        </li>
        <li style="margin-bottom: 12px; padding-left: 24px; position: relative;">
          <strong style="color: #10b981; position: absolute; left: 0;">ğŸ”</strong>
          <strong>ç³»ç»Ÿäº‹ä»¶è¿‡æ»¤</strong><br>
          <span style="color: #6b7280; font-size: 14px;">è‡ªåŠ¨è¿‡æ»¤ isTimer/isOutsideApp/isTimeLog äº‹ä»¶</span>
        </li>
        <li style="margin-bottom: 12px; padding-left: 24px; position: relative;">
          <strong style="color: #f59e0b; position: absolute; left: 0;">âœ¨</strong>
          <strong>Framer Motion åŠ¨ç”»</strong><br>
          <span style="color: #6b7280; font-size: 14px;">æµç•…çš„ spring å¼¹ç°§åŠ¨ç”»ï¼Œæ”¶çº³ â†” å±•å¼€çŠ¶æ€åˆ‡æ¢</span>
        </li>
      </ul>
    </div>

    <!-- Demo 3: æ¶æ„è¯´æ˜ -->
    <div class="demo-section">
      <h2 class="demo-title">ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ</h2>
      
      <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
        <h4 style="font-size: 14px; font-weight: 600; color: #6b7280; margin-bottom: 12px;">ç»„ä»¶ç»“æ„</h4>
        <pre style="font-size: 13px; line-height: 1.8; color: #374151;">EventTreeCanvas
â”œâ”€ ReactFlow (ç”»å¸ƒå®¹å™¨)
â”‚  â”œâ”€ CustomEventNode (è‡ªå®šä¹‰èŠ‚ç‚¹)
â”‚  â”‚  â”œâ”€ LinkedCard Ã— N (å †å å¡ç‰‡)
â”‚  â”‚  â””â”€ EventNodeContent (ä¸»èŠ‚ç‚¹)
â”‚  â”œâ”€ Controls (ç¼©æ”¾/å¹³ç§»)
â”‚  â”œâ”€ MiniMap (å°åœ°å›¾)
â”‚  â””â”€ Background (ç½‘æ ¼èƒŒæ™¯)
â””â”€ EventTree.css (æ ·å¼)</pre>
      </div>

      <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
        <h4 style="font-size: 14px; font-weight: 600; color: #6b7280; margin-bottom: 12px;">æ•°æ®æµ</h4>
        <pre style="font-size: 13px; line-height: 1.8; color: #374151;">1. EventService.getAllEvents() â†’ è·å–æ‰€æœ‰äº‹ä»¶
2. EventService.shouldShowInEventTree() â†’ è¿‡æ»¤ç³»ç»Ÿäº‹ä»¶
3. EventService.getLinkedEvents() â†’ è·å–åŒå‘é“¾æ¥
4. æ„å»º React Flow èŠ‚ç‚¹å’Œè¾¹
5. æ¸²æŸ“ CustomEventNode + LinkedCard
6. ç”¨æˆ·äº¤äº’ â†’ onEventClick / onCheckboxChange</pre>
      </div>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ•°æ®åŠ è½½
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.getElementById('eventtree-root');
      if (root) {
        root.innerHTML = `
          <div style="text-align: center; color: #9ca3af; font-size: 14px;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin-bottom: 16px;">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <p><strong>React ç»„ä»¶éœ€è¦åœ¨åº”ç”¨ä¸­æ¸²æŸ“</strong></p>
            <p style="margin-top: 8px; opacity: 0.7;">è¯·å°† EventTreeCanvas ç»„ä»¶é›†æˆåˆ°æ‚¨çš„ React åº”ç”¨</p>
          </div>
        `;
      }
    });
  </script>
</body>
</html>
