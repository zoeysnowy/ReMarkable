<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>çº¯æ•°å­—æ—¥æœŸè§£ææµ‹è¯•</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .test-case { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
    .passed { background: #d4edda; }
    .failed { background: #f8d7da; }
    .result { margin-top: 5px; font-family: monospace; font-size: 12px; }
  </style>
</head>
<body>
  <h1>ğŸ“… çº¯æ•°å­—æ—¥æœŸè§£ææµ‹è¯• (æ›¿ä»£ chrono-node)</h1>
  <p>æµ‹è¯• parseNaturalLanguage æ˜¯å¦æ­£ç¡®è§£æçº¯æ•°å­—æ—¥æœŸæ ¼å¼</p>
  <div id="results"></div>

  <script type="module">
    // æµ‹è¯•ç”¨ä¾‹
    const testCases = [
      // å®Œæ•´æ—¥æœŸæ ¼å¼
      { input: '2025-12-25', expected: { date: '2025-12-25', hasTime: false } },
      { input: '2025/12/25', expected: { date: '2025-12-25', hasTime: false } },
      { input: '2025.12.25', expected: { date: '2025-12-25', hasTime: false } },
      { input: '20251225', expected: { date: '2025-12-25', hasTime: false } },
      
      // çŸ­æ ¼å¼ï¼ˆè‡ªåŠ¨æ¨æ–­å¹´ä»½ï¼‰
      { input: '12-25', expected: { date: '2025-12-25', hasTime: false } },
      { input: '12/25', expected: { date: '2025-12-25', hasTime: false } },
      { input: '12.25', expected: { date: '2025-12-25', hasTime: false } },
      
      // å¸¦æ—¶é—´çš„æ ¼å¼
      { input: '2025-12-25 14:30', expected: { date: '2025-12-25', time: '14:30', hasTime: true } },
      { input: '12/25 14:30', expected: { date: '2025-12-25', time: '14:30', hasTime: true } },
      { input: '12-25 14:30', expected: { date: '2025-12-25', time: '14:30', hasTime: true } },
      
      // å†’å·æ—¶é—´æ ¼å¼
      { input: '2025-12-25 14:30', expected: { date: '2025-12-25', time: '14:30', hasTime: true } },
      
      // æ•´ç‚¹æ—¶é—´
      { input: '12-25 9', expected: { date: '2025-12-25', time: '9ç‚¹', hasTime: true } },
      
      // è¾¹ç•Œæµ‹è¯•
      { input: '2-29', expected: { matched: false } }, // æ— æ•ˆæ—¥æœŸï¼ˆ2025å¹´2æœˆæ²¡æœ‰29æ—¥ï¼‰
      { input: '13-01', expected: { matched: false } }, // æ— æ•ˆæœˆä»½
      { input: '12-32', expected: { matched: false } }, // æ— æ•ˆæ—¥æœŸ
    ];

    const resultsDiv = document.getElementById('results');
    let passCount = 0;
    let failCount = 0;

    // ç®€åŒ–çš„æµ‹è¯•å‡½æ•°ï¼ˆå®é™…åº”è¯¥ä» naturalLanguageTimeDictionary.ts å¯¼å…¥ï¼‰
    function testParse(input) {
      // æ¨¡æ‹Ÿè§£æé€»è¾‘
      const patterns = [
        /^(\d{4})[-\/.]?(\d{1,2})[-\/.]?(\d{1,2})(?:\s+(\d{1,2})[ï¼š:]?(\d{1,2}))?$/,
        /^(\d{1,2})[-\/.](\d{1,2})(?:\s+(\d{1,2})[ï¼š:]?(\d{1,2}))?$/,
      ];
      
      for (const pattern of patterns) {
        const match = input.match(pattern);
        if (match) {
          let year, month, day, hour = null, minute = null;
          
          if (match[1].length === 4) {
            year = parseInt(match[1]);
            month = parseInt(match[2]);
            day = parseInt(match[3]);
            if (match[4]) hour = parseInt(match[4]);
            if (match[5]) minute = parseInt(match[5]);
          } else {
            month = parseInt(match[1]);
            day = parseInt(match[2]);
            year = 2025; // ç®€åŒ–ï¼šä½¿ç”¨å›ºå®šå¹´ä»½
            if (match[3]) hour = parseInt(match[3]);
            if (match[4]) minute = parseInt(match[4]);
          }
          
          // éªŒè¯æ—¥æœŸ
          if (month >= 1 && month <= 12 && day >= 1 && day <= 31) {
            const date = new Date(year, month - 1, day);
            if (date.getMonth() === month - 1) {
              return {
                matched: true,
                date: `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`,
                time: hour !== null ? (minute !== null ? `${hour}:${minute.toString().padStart(2, '0')}` : `${hour}ç‚¹`) : null
              };
            }
          }
        }
      }
      
      return { matched: false };
    }

    // è¿è¡Œæµ‹è¯•
    testCases.forEach((testCase, index) => {
      const result = testParse(testCase.input);
      const passed = testCase.expected.matched === false 
        ? !result.matched 
        : result.matched && result.date === testCase.expected.date &&
          (testCase.expected.hasTime ? result.time === testCase.expected.time : !result.time);
      
      if (passed) passCount++;
      else failCount++;
      
      const div = document.createElement('div');
      div.className = `test-case ${passed ? 'passed' : 'failed'}`;
      div.innerHTML = `
        <strong>æµ‹è¯• ${index + 1}: ${passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}</strong><br>
        è¾“å…¥: "${testCase.input}"<br>
        æœŸæœ›: ${JSON.stringify(testCase.expected)}<br>
        å®é™…: ${JSON.stringify(result)}
      `;
      resultsDiv.appendChild(div);
    });

    // æ˜¾ç¤ºæ€»ç»“
    const summary = document.createElement('div');
    summary.style.cssText = 'margin-top: 20px; padding: 15px; background: #e7f3ff; border: 2px solid #007bff;';
    summary.innerHTML = `
      <h2>æµ‹è¯•æ€»ç»“</h2>
      <p>âœ… é€šè¿‡: ${passCount}</p>
      <p>âŒ å¤±è´¥: ${failCount}</p>
      <p>æ€»è®¡: ${testCases.length}</p>
      <p>é€šè¿‡ç‡: ${(passCount / testCases.length * 100).toFixed(1)}%</p>
    `;
    resultsDiv.appendChild(summary);
  </script>
</body>
</html>
