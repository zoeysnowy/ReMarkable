<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ ‡é¢˜æº¢å‡ºä¿®å¤æµ‹è¯•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Microsoft YaHei', Arial;
      background: #f3f4f6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      gap: 20px;
    }

    .test-container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 600px;
      width: 100%;
    }

    h1 {
      color: #1f2937;
      margin-bottom: 20px;
      font-size: 24px;
    }

    .description {
      color: #6b7280;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    /* æ¨¡æ‹Ÿ EventEditModal çš„å®¹å™¨ç»“æ„ */
    .event-overview {
      width: 400px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      padding: 24px 48px 24px 48px;
      overflow-y: visible;
      box-sizing: border-box;
      overflow-x: hidden;
      border: 2px solid #e5e7eb;
      border-radius: 16px;
      background: white;
      margin-bottom: 20px;
    }

    .section-identity {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 12px 20px;
      align-items: center;
      width: 100%;
      box-sizing: border-box;
      background: #f9fafb;
      border-radius: 8px;
    }

    .emoji-large {
      font-size: 42px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: background 0.2s;
      text-align: center;
      user-select: none;
    }

    .title-checkbox-row {
      display: inline-flex; /* æ”¹ä¸ºinline-flexï¼Œå®½åº¦ç”±å†…å®¹å†³å®š */
      align-items: flex-start; /* é¡¶éƒ¨å¯¹é½ï¼Œcheckboxé€šè¿‡margin-topå’Œç¬¬ä¸€è¡Œæ–‡å­—å¯¹é½ */
      gap: 6px;
      max-width: 100%;
    }

    .custom-checkbox {
      width: 20px;
      height: 20px;
      min-width: 20px;
      flex-shrink: 0; /* é˜²æ­¢checkboxè¢«å‹ç¼© */
      border: 2px solid #d1d5db;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 3.5px; /* (18px font-size Ã— 1.5 line-height = 27pxï¼Œ27px / 2 - 20px / 2 = 3.5px) */
    }

    .custom-checkbox:hover {
      border-color: #3b82f6;
    }

    .title-input {
      font-size: 18px;
      font-weight: 400;
      border: none;
      outline: none;
      padding: 0;
      color: #1f2937;
      line-height: 1.5;
      text-align: center; /* æ–‡å­—å±…ä¸­ */
      flex: 0 0 auto; /* ä¸è‡ªåŠ¨ä¼¸ç¼©ï¼Œä½¿ç”¨åŠ¨æ€è®¡ç®—çš„å®½åº¦ */
      min-height: 27px; /* è®¾ç½®æœ€å°é«˜åº¦ä¸ºå•è¡Œé«˜åº¦ */
      word-wrap: break-word;
      word-break: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      resize: none;
      overflow-y: auto;
      font-family: inherit;
      max-height: 200px;
    }

    .title-input::placeholder {
      color: #d1d5db;
    }

    .test-cases {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 20px;
    }

    .btn {
      padding: 10px 20px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    .btn:hover {
      background: #2563eb;
    }

    .status {
      margin-top: 30px;
      padding: 16px;
      background: #e0f2fe;
      border-left: 4px solid #0284c7;
      border-radius: 4px;
    }

    .status h3 {
      color: #0c4a6e;
      margin-bottom: 8px;
      font-size: 16px;
    }

    .status ul {
      color: #075985;
      margin-left: 20px;
      line-height: 1.8;
    }

    .compact-view .event-overview {
      width: 383px;
      padding: 24px 36px 0 36px;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ğŸ¯ æ ‡é¢˜æº¢å‡ºä¿®å¤æµ‹è¯•</h1>
    <div class="description">
      <p><strong>é—®é¢˜æè¿°ï¼š</strong>EditModalçš„æ ‡é¢˜æº¢å‡ºã€æ— æ³•å±…ä¸­ã€checkboxæœªå¯¹é½</p>
      <p><strong>ä¿®å¤æ–¹æ¡ˆï¼š</strong>å°†inputæ”¹ä¸ºtextareaï¼ŒåŠ¨æ€è®¡ç®—å®½åº¦ï¼Œè¶…è¿‡æœ€å¤§å€¼è‡ªåŠ¨æ¢è¡Œï¼Œæ–‡å­—å±…ä¸­ï¼Œcheckboxè·Ÿéšæ ‡é¢˜å¹¶ä¸ç¬¬ä¸€è¡Œå‚ç›´å±…ä¸­å¯¹é½</p>
    </div>

    <h2 style="font-size: 18px; color: #374151; margin-bottom: 16px;">è¯¦æƒ…è§†å›¾ (400px å®½)</h2>
    <div class="event-overview">
      <div class="section-identity">
        <div class="emoji-large">ğŸ“</div>
        <div class="title-checkbox-row">
          <div class="custom-checkbox"></div>
          <textarea
            class="title-input"
            placeholder="è¯·è¾“å…¥æ ‡é¢˜..."
            rows="1"
            oninput="autoResize(this)"
          >è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸éå¸¸éå¸¸éå¸¸é•¿çš„æ ‡é¢˜ç”¨æ¥æµ‹è¯•è‡ªåŠ¨æ¢è¡ŒåŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</textarea>
        </div>
      </div>
    </div>

    <h2 style="font-size: 18px; color: #374151; margin-bottom: 16px;">ç´§å‡‘è§†å›¾ (383px å®½)</h2>
    <div class="event-overview compact-view">
      <div class="section-identity">
        <div class="emoji-large">âœ…</div>
        <div class="title-checkbox-row">
          <div class="custom-checkbox"></div>
          <textarea
            class="title-input"
            placeholder="è¯·è¾“å…¥æ ‡é¢˜..."
            rows="1"
            oninput="autoResize(this)"
          >è¶…çº§è¶…çº§è¶…çº§è¶…çº§è¶…çº§è¶…çº§è¶…çº§è¶…çº§è¶…çº§é•¿çš„æ ‡é¢˜æµ‹è¯•ç´§å‡‘è§†å›¾æ¢è¡Œ</textarea>
        </div>
      </div>
    </div>

    <div class="test-cases">
      <h3 style="font-size: 16px; color: #374151; margin-bottom: 8px;">æµ‹è¯•ç”¨ä¾‹ï¼š</h3>
      <button class="btn" onclick="setTitle(0, 'çŸ­æ ‡é¢˜')">çŸ­æ ‡é¢˜</button>
      <button class="btn" onclick="setTitle(0, 'è¿™æ˜¯ä¸€ä¸ªä¸­ç­‰é•¿åº¦çš„æ ‡é¢˜ç”¨æ¥æµ‹è¯•æ¢è¡Œ')">ä¸­ç­‰é•¿åº¦æ ‡é¢˜</button>
      <button class="btn" onclick="setTitle(0, 'è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸é•¿çš„æ ‡é¢˜ç”¨æ¥å……åˆ†æµ‹è¯•è‡ªåŠ¨æ¢è¡ŒåŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¶…é•¿æ–‡æœ¬çš„æƒ…å†µ')">è¶…é•¿æ ‡é¢˜</button>
      <button class="btn" onclick="setTitle(0, 'ThisIsAVeryLongWordWithoutSpacesToTestWordBreakFunctionalityInCSSStyles')">æ— ç©ºæ ¼é•¿å•è¯</button>
    </div>

    <div class="status">
      <h3>âœ… ä¿®å¤å†…å®¹ï¼š</h3>
      <ul>
        <li>å°† <code>input</code> æ”¹ä¸º <code>textarea</code> æ”¯æŒå¤šè¡Œæ–‡æœ¬</li>
        <li>ä¸º <code>.title-checkbox-row</code> æ”¹ç”¨ <code>inline-flex</code>ï¼Œå®½åº¦ç”±å†…å®¹å†³å®š</li>
        <li>ä¸º <code>.title-checkbox-row</code> æ·»åŠ  <code>align-items: center</code> è®©checkboxä¸æ–‡å­—å‚ç›´å±…ä¸­</li>
        <li>ä¸º <code>.title-input</code> æ·»åŠ  <code>text-align: center</code> è®©æ–‡å­—å±…ä¸­å¯¹é½</li>
        <li>ä¸º <code>.section-identity</code> çš„ <code>align-items: center</code> è®©æ•´ä¸ªæ ‡é¢˜è¡Œå±…ä¸­</li>
        <li>å®ç°åŠ¨æ€å®½åº¦è®¡ç®—ï¼šä½¿ç”¨éšè—spanæµ‹é‡æ–‡æœ¬å®é™…å®½åº¦</li>
        <li>å®½åº¦é€»è¾‘ï¼šçŸ­æ–‡æœ¬è‡ªé€‚åº”å®½åº¦ï¼Œè¶…è¿‡280pxæ—¶å›ºå®šæœ€å¤§å®½åº¦å¹¶è‡ªåŠ¨æ¢è¡Œ</li>
        <li>checkboxè·Ÿéšæ ‡é¢˜ä½ç½®ï¼Œå§‹ç»ˆä¸ç¬¬ä¸€è¡Œæ–‡å­—å‚ç›´å±…ä¸­å¯¹é½</li>
      </ul>
    </div>
  </div>

  <script>
    function autoResize(textarea) {
      const text = textarea.value || textarea.placeholder || '';
      if (!text) {
        textarea.style.width = '50px';
        textarea.style.height = 'auto';
        textarea.style.height = textarea.scrollHeight + 'px';
        return;
      }
      
      const maxWidth = 240;
      
      // ç”¨éšè— span æµ‹é‡æ–‡æœ¬ä¸æ¢è¡Œæ—¶çš„å®½åº¦
      const span = document.createElement('span');
      span.style.visibility = 'hidden';
      span.style.position = 'absolute';
      span.style.whiteSpace = 'pre'; // ä¸æ¢è¡Œ
      span.style.font = window.getComputedStyle(textarea).font;
      span.style.fontSize = window.getComputedStyle(textarea).fontSize;
      span.style.fontWeight = window.getComputedStyle(textarea).fontWeight;
      span.textContent = text;
      document.body.appendChild(span);
      const textWidth = span.offsetWidth;
      document.body.removeChild(span);
      
      // å¦‚æœæ–‡æœ¬å®½åº¦ <= æœ€å¤§å®½åº¦ï¼Œä½¿ç”¨å®é™…å®½åº¦ï¼›å¦åˆ™ä½¿ç”¨æœ€å¤§å®½åº¦
      const finalWidth = textWidth <= maxWidth ? textWidth + 10 : maxWidth;
      
      // å…ˆè®¾ç½®å®½åº¦ï¼Œè®©æ–‡æœ¬æŒ‰è¿™ä¸ªå®½åº¦æ¢è¡Œ
      textarea.style.width = finalWidth + 'px';
      
      // é‡ç½®é«˜åº¦å¹¶é‡æ–°è®¡ç®—
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 'px';
    }

    function setTitle(index, text) {
      const textareas = document.querySelectorAll('.title-input');
      if (textareas[index]) {
        textareas[index].value = text;
        autoResize(textareas[index]);
      }
    }

    // åˆå§‹åŒ–æ‰€æœ‰ textarea é«˜åº¦å’Œå®½åº¦
    window.addEventListener('load', () => {
      document.querySelectorAll('.title-input').forEach(textarea => {
        autoResize(textarea);
      });
    });
  </script>
</body>
</html>
