# ReMarkable 用户使用指南

## 📅 标签管理 (Tag Management)

### 快捷键总览

#### 批量操作快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Delete` / `Backspace` | 批量删除 | 选中多个标签后按Delete键删除 |
| `Shift+Alt+↑` | 批量上移 | 将选中的标签向上移动一位 |
| `Shift+Alt+↓` | 批量下移 | 将选中的标签向下移动一位 |
| `Shift+Alt+M` | 批量日历映射 | 为选中的标签批量设置日历映射 |
| `Ctrl+C` / `Cmd+C` | 复制标签 | 复制选中的标签(支持文本和JSON格式) |
| `Ctrl+X` / `Cmd+X` | 剪切标签 | 剪切选中的标签 |
| `Ctrl+V` / `Cmd+V` | 粘贴标签 | 粘贴剪贴板中的标签 |

#### 单个标签操作

| 操作 | 方法 | 说明 |
|------|------|------|
| 编辑标签名称 | 双击标签 | 进入编辑模式，修改后按Enter保存 |
| 更改标签颜色 | 点击色块 | 打开颜色选择器 |
| 设置日历映射 | 点击日历名称 | 选择要映射的Outlook日历 |
| 打卡次数 | 点击打卡按钮 | 增加打卡计数 |
| 累计时长 | 自动计算 | 基于关联事件的时长统计 |

### 📋 批量操作详细说明

#### 1. 选择多个标签

**方法一：鼠标拖选**
- 按住鼠标左键，拖动选择多个标签
- 松开鼠标后标签会被高亮显示

**方法二：Shift点击**
- 点击第一个标签
- 按住Shift键，点击最后一个标签
- 中间的所有标签都会被选中

**方法三：Ctrl点击**
- 按住Ctrl(Mac上为Cmd)
- 依次点击要选择的标签
- 可以选择不连续的多个标签

#### 2. 批量删除标签

1. 选中要删除的标签
2. 按 `Delete` 或 `Backspace` 键
3. 确认删除操作
4. 所选标签将被删除

#### 3. 批量移动标签

**向上移动：**
1. 选中要移动的标签
2. 按 `Shift+Alt+↑`
3. 选中的标签会整体向上移动一位

**向下移动：**
1. 选中要移动的标签
2. 按 `Shift+Alt+↓`
3. 选中的标签会整体向下移动一位

#### 4. 批量日历映射 ⭐ 智能功能

**方法一：快捷键方式**
1. 选中多个标签
2. 按 `Shift+Alt+M`
3. 在弹出的日历选择器中选择日历
4. 所有选中的标签都会映射到该日历

**方法二：智能点击方式** 🆕
1. 选中多个标签(鼠标拖选或Shift点击)
2. 点击**任意一个选中标签**的日历映射区域
3. 系统自动检测到多选状态，启用批量模式
4. 选择日历后，所有选中的标签都会更新

**视觉提示：**
- 选中多个标签后，日历映射区域会显示**蓝色边框**
- 右上角显示**数字徽章**，表示选中的标签数量
- 鼠标悬停时显示"批量设置 (N个标签)"提示

#### 5. 复制和粘贴标签

**复制：**
1. 选中要复制的标签
2. 按 `Ctrl+C` (Mac: `Cmd+C`)
3. 标签数据会被复制到剪贴板(支持文本和JSON格式)

**剪切：**
1. 选中要剪切的标签
2. 按 `Ctrl+X` (Mac: `Cmd+X`)
3. 标签会被移除并复制到剪贴板

**粘贴：**
1. 在标签列表中点击空白处
2. 按 `Ctrl+V` (Mac: `Cmd+V`)
3. 剪贴板中的标签会被粘贴到列表末尾

### 🎨 标签层级管理

#### 创建父子关系

**方法一：拖拽创建**
1. 拖动标签到另一个标签上
2. 成为该标签的子标签
3. 子标签会自动缩进显示

**方法二：编辑parentId**
1. 在JSON编辑模式下
2. 设置标签的 `parentId` 字段
3. 保存后会自动建立层级关系

#### 层级特性

- **自动继承**：子标签会继承父标签的日历映射
- **视觉缩进**：子标签会根据层级深度自动缩进
- **级联操作**：删除父标签时可选择是否删除子标签

### 📊 统计功能

#### 打卡计数
- 点击标签右侧的打卡按钮 ⚡
- 每次点击增加1次打卡
- 打卡次数会持久化保存

#### 时长统计
- 自动统计关联该标签的事件总时长
- 显示格式：`X小时Y分钟` 或 `Y分钟`
- 实时更新，无需手动刷新

### 🔍 搜索功能

在搜索框中输入关键词：
- 支持标签名称搜索
- 支持拼音首字母搜索
- 实时过滤显示结果

### 💾 数据管理

#### 自动保存
- 所有操作都会自动保存到 `localStorage`
- 无需手动保存
- 页面刷新后数据保持不变

#### 数据导出
- 支持JSON格式导出
- 可用于备份或迁移

---

## 📅 日历管理 (Calendar)

### Microsoft Outlook 集成

#### 日历同步
- 自动与Microsoft Calendar双向同步
- 支持增量同步(3个月时间窗口)
- 每20-30秒自动同步一次

#### 批量操作
- 支持批量删除事件
- 支持批量移动事件
- 支持批量修改日历映射

---

## ⚙️ 性能优化

### 同步优化
- **智能时间窗口**：只同步最近3个月的事件
- **增量更新**：只同步变化的事件，避免全量更新
- **批量保存**：多个操作合并为一次保存，减少I/O
- **索引优化**：使用Hash Map实现O(1)事件查找

### 渲染优化
- **虚拟化**：大列表使用虚拟滚动
- **React.memo**：避免不必要的组件重渲染
- **useMemo**：缓存计算结果

---

## 🐛 常见问题

### Q: 标签无法编辑？
A: 确保点击标签名称区域，而非其他操作按钮区域。

### Q: 批量操作不生效？
A: 确认已正确选中标签(标签应该被高亮显示)。

### Q: 日历同步很慢？
A: 首次同步会较慢，后续会使用增量同步。如果持续慢，检查网络连接。

### Q: 删除标签后能恢复吗？
A: 目前不支持撤销，删除前请确认。建议定期导出备份。

---

## 📝 最佳实践

### 标签命名规范
- 使用清晰、简短的名称
- 可以使用emoji增强视觉识别
- 建议使用层级结构组织相关标签

### 日历映射策略
- 工作相关标签映射到工作日历
- 个人事务映射到个人日历
- 使用颜色区分不同类型的标签

### 批量操作技巧
- 使用搜索功能快速定位标签
- 结合Shift和Ctrl选择不连续的标签
- 利用智能批量日历映射提高效率

---

## 🔄 更新日志

### v1.3 (2025-10-24)
- ✅ 新增智能批量日历映射功能
- ✅ 优化同步性能(27s → <1s)
- ✅ 修复删除检查误判bug
- ✅ 实现批量保存机制

### v1.2
- ✅ 新增标签层级管理
- ✅ 新增打卡和时长统计
- ✅ 优化搜索功能

### v1.1
- ✅ 实现Microsoft Calendar集成
- ✅ 支持双向同步
- ✅ 新增批量操作快捷键

---

## 📮 反馈与支持

如有问题或建议，请通过以下方式联系：
- GitHub Issues: [ReMarkable/issues](https://github.com/zoeysnowy/ReMarkable/issues)
- Email: support@remarkable.com

---

**文档版本**: v1.3  
**最后更新**: 2025-10-24
