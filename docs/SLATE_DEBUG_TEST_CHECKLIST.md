# Slate 调试系统测试清单

## ✅ 功能验证

### 1. 基础调试开关

- [ ] 在控制台运行 `window.SLATE_DEBUG = true; localStorage.setItem('SLATE_DEBUG', 'true')`
- [ ] 刷新页面，看到启动信息：`[🚀] SLATE_DEBUG 已启用`
- [ ] 看到提示：`💡 调试命令可用: window.slateEditorSnapshot()`

### 2. 键盘事件日志

- [ ] 在编辑器中输入一个字符（如 'a'）
- [ ] 控制台显示：`[⌨️] a`
- [ ] 展开日志，看到：
  - 📋 按键信息（key, code, 修饰键）
  - 📍 光标位置（节点路径、Line ID、文本内容）
  - 🎯 选区详情（Anchor、Focus、是否折叠）

### 3. 内容变化日志

- [ ] 继续输入几个字符
- [ ] 控制台显示：`[📝] 内容变化`
- [ ] 展开日志，看到：
  - 📊 变化统计（节点数、变化量）
  - 📄 新节点列表（每个节点的ID、类型、文本、层级）

### 4. Enter 键操作日志

- [ ] 按 Enter 键创建新行
- [ ] 控制台显示：`[⚡] Enter - 创建新行`
- [ ] 展开日志，看到：
  - 当前行位置
  - 新行插入位置
  - 层级继承信息

### 5. Tab 键操作日志

- [ ] 按 Tab 键增加缩进
- [ ] 控制台显示：`[⚡] Tab - 增加缩进` 或类似信息
- [ ] 看到层级变化记录

### 6. Delete/Backspace 操作日志

- [ ] 在空行按 Backspace
- [ ] 控制台显示：`[⚡] Backspace - 删除空行`
- [ ] 看到删除操作详情

### 7. 点击事件日志

- [ ] 用鼠标点击编辑器的不同位置
- [ ] 控制台显示：`[🖱️] CLICK`
- [ ] 看到点击坐标和焦点变化

### 8. DOM 变化监控

- [ ] 在编辑器中进行各种操作
- [ ] 控制台显示：`[🔄] DOM: 子节点变化` 或 `文本内容变化`
- [ ] 看到 DOM 层面的变化详情

### 9. 编辑器快照命令

- [ ] 在控制台运行 `window.slateEditorSnapshot()`
- [ ] 看到：`[📸] 编辑器快照`
- [ ] 展开日志，看到：
  - 📄 所有节点列表
  - 🎯 当前选区信息
  - 📊 统计数据

### 10. 关闭调试

- [ ] 运行 `window.SLATE_DEBUG = false; localStorage.removeItem('SLATE_DEBUG')`
- [ ] 刷新页面
- [ ] 确认控制台不再显示调试日志

---

## 🔍 详细测试场景

### 场景 1：连续输入测试

1. 启用调试
2. 输入 "Hello World"
3. 验证每个字符都有键盘事件日志
4. 验证内容变化日志显示正确的文本

### 场景 2：多行编辑测试

1. 启用调试
2. 输入第一行文本
3. 按 Enter 创建新行
4. 输入第二行文本
5. 验证：
   - Enter 操作日志正确
   - 新行插入位置正确
   - 两行都显示在节点列表中

### 场景 3：缩进测试

1. 启用调试
2. 创建一行文本
3. 按 Tab 增加缩进
4. 按 Shift+Tab 减少缩进
5. 验证：
   - 每个操作都有日志
   - 层级变化正确记录

### 场景 4：选区测试

1. 启用调试
2. 输入一些文本
3. 用鼠标选中部分文本
4. 验证选区日志显示：
   - 类型为"选区"（非"光标"）
   - Anchor 和 Focus 不同
   - 选中的文本内容正确

### 场景 5：删除测试

1. 启用调试
2. 创建多行文本
3. 在空行按 Backspace 删除
4. 选中文本按 Delete 删除
5. 验证删除操作日志正确

### 场景 6：复制粘贴测试

1. 启用调试
2. 输入一些文本
3. 复制文本（Ctrl+C）
4. 粘贴到其他位置（Ctrl+V）
5. 验证：
   - 复制操作有日志
   - 粘贴操作有日志
   - DOM 变化被记录

---

## 🐛 已知问题检查

- [ ] 日志中是否有错误或警告？
- [ ] 日志是否过于频繁影响性能？
- [ ] 日志格式是否清晰易读？
- [ ] 是否有日志丢失的情况？

---

## 📊 性能检查

- [ ] 启用调试后编辑器响应是否流畅？
- [ ] 控制台日志量是否可控？
- [ ] 是否有内存泄漏（长时间编辑后）？

---

## ✅ 验收标准

1. ✅ 所有基础功能测试通过
2. ✅ 至少 3 个详细场景测试通过
3. ✅ 无严重性能问题
4. ✅ 日志格式清晰、信息完整
5. ✅ 文档清晰易懂

---

**测试日期**: ___________  
**测试人员**: ___________  
**测试结果**: [ ] 通过 / [ ] 失败  
**备注**: ___________
