# 📅 桌面日历组件自定义指南

## 🎨 外观自定义功能

桌面日历组件现在支持完整的外观自定义，包括背景颜色和透明度调整。

### 功能概览

```
┌─────────────────────────────┐
│ 📅 日历组件      ⚙️  ×    │ ← 拖动栏（点击 ⚙️ 打开设置）
├─────────────────────────────┤
│    ┌─────────────┐          │
│    │  🎨 外观设置  │         │ ← 设置面板
│    ├─────────────┤          │
│    │ 背景颜色     │          │
│    │ [🎨] #ffffff│          │
│    │ ████████    │          │ ← 预设颜色
│    │             │          │
│    │ 透明度: 85% │          │
│    │ ━━━━━━━━●━  │          │ ← 滑块
│    │             │          │
│    │  预览效果    │          │
│    └─────────────┘          │
│                             │
│     TimeCalendar 日历       │
│                            ⋰│
└─────────────────────────────┘
```

## 🚀 使用方法

### 1. 打开设置面板
- 点击顶部拖动栏右侧的 **⚙️ 设置按钮**
- 设置面板会在右上角弹出

### 2. 调整背景颜色

#### 方式一：使用颜色选择器
- 点击左侧的 **彩色方块**
- 在系统颜色选择器中选择喜欢的颜色

#### 方式二：输入颜色代码
- 在文本框中直接输入十六进制颜色代码（如 `#6464ff`）

#### 方式三：使用预设颜色（快速选择）
- **白色** (#ffffff) - 经典白色背景
- **浅灰** (#f0f0f0) - 柔和中性背景
- **浅紫** (#e8e8ff) - 清新紫色调
- **浅粉** (#ffe8e8) - 温暖粉色调
- **浅绿** (#e8ffe8) - 清新绿色调
- **浅黄** (#fff8e8) - 温馨黄色调
- **黑色** (#000000) - 深色模式背景

### 3. 调整透明度
- 拖动 **透明度滑块**（0-100%）
- **0%** = 完全透明（可以看穿日历）
- **100%** = 完全不透明
- 实时显示当前透明度百分比

### 4. 预览效果
- 设置面板底部有 **"预览效果"** 区域
- 实时显示当前选择的背景色和透明度
- 日历背景会立即应用更改

### 5. 保存设置
- 所有更改会**自动保存**到本地存储
- 下次打开组件时会自动恢复上次的设置

## 💡 使用场景

### 场景 1: 半透明悬浮日历
```
设置: bgColor = #ffffff, bgOpacity = 0.7
效果: 白色半透明背景，可以看到桌面壁纸
适合: 需要同时查看桌面内容的场景
```

### 场景 2: 深色模式
```
设置: bgColor = #000000, bgOpacity = 0.85
效果: 深色半透明背景，护眼且现代
适合: 夜间使用或深色系桌面
```

### 场景 3: 彩色主题
```
设置: bgColor = #e8e8ff, bgOpacity = 1.0
效果: 浅紫色不透明背景，清新活力
适合: 个性化定制，匹配桌面主题
```

### 场景 4: 完全透明
```
设置: bgColor = #ffffff, bgOpacity = 0.0
效果: 完全透明背景，只显示日历内容
适合: 极简风格，与桌面完美融合
```

## 🎯 实用技巧

### 快速切换透明度
1. 拖动滑块到 **50%** 左右获得最佳半透明效果
2. 完全透明（0%）可能导致文字难以阅读
3. 建议保持 **30-90%** 之间以保证可读性

### 颜色搭配建议
- **浅色背景** + **高透明度** = 清新通透
- **深色背景** + **中透明度** = 沉稳专业
- **彩色背景** + **低透明度** = 个性活力
- **任意颜色** + **100%不透明** = 传统风格

### 快捷操作
- 点击预设颜色可以快速切换主题
- 使用键盘方向键可以微调滑块
- 关闭设置面板后更改会自动保存

## 🔧 技术细节

### 数据持久化
```typescript
// 设置存储在 localStorage
localStorage.setItem('widget-bg-color', '#ffffff');
localStorage.setItem('widget-bg-opacity', '0.85');
```

### 颜色格式转换
```typescript
// 十六进制 → RGBA
hexToRgba('#6464ff', 0.8) 
// 返回: 'rgba(100, 100, 255, 0.8)'
```

### 实时应用
- 颜色和透明度更改会**立即应用**到日历背景
- 无需重启或刷新组件
- 设置在所有会话中保持不变

## 📝 注意事项

1. **透明度过低警告**: 如果设置为 0-20%，文字可能难以阅读
2. **自动保存**: 更改会立即保存，无需手动点击"保存"
3. **跨窗口独立**: 每个 widget 窗口有独立的设置
4. **性能影响**: 半透明效果可能略微增加 GPU 使用

## 🐛 故障排除

### 问题：颜色没有应用
- 检查是否输入了有效的十六进制颜色代码（如 #ff0000）
- 确保代码以 `#` 开头且包含 6 位十六进制数字

### 问题：设置没有保存
- 检查浏览器是否允许 localStorage
- 尝试手动刷新页面（Ctrl+R）

### 问题：文字看不清
- 增加背景不透明度（向右拖动滑块）
- 选择对比度更高的背景色
- 避免使用与文字颜色相近的背景

---

## 🎉 开始自定义

现在就打开桌面日历组件，点击 **⚙️ 设置按钮**，创建属于你的个性化日历吧！
