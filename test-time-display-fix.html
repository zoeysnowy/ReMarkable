<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•ä¿®å¤åçš„æ—¶é—´æ˜¾ç¤º</title>
</head>
<body>
    <h1>æµ‹è¯•ä¿®å¤åçš„ formatRelativeTimeDisplay</h1>
    <div id="results"></div>

    <script type="module">
        // æ¨¡æ‹Ÿä¿®å¤åçš„ formatRelativeTimeDisplay é€»è¾‘
        function formatRelativeTimeDisplay(startTime, endTime, isAllDay, dueDate, displayHint) {
            // ğŸ†• ä¼˜å…ˆçº§ 0: å¦‚æœæœ‰ displayHintï¼Œç›´æ¥ä½¿ç”¨ï¼ˆä¿æŒç”¨æˆ·è¾“å…¥æ„å›¾ï¼‰
            if (displayHint) {
                // å¦‚æœæ˜¯æ¨¡ç³Šæ—¶é—´ä¸”æ²¡æœ‰å…·ä½“æ—¶é—´ï¼Œåªæ˜¾ç¤º displayHint
                const hasValidTime = startTime && !startTime.includes('00:00:00');
                if (!hasValidTime || isAllDay) {
                    return displayHint;
                }
                
                // æœ‰å…·ä½“æ—¶é—´æ—¶ï¼Œç»„åˆæ˜¾ç¤º
                const startTimeStr = startTime.split(' ')[1]?.substring(0, 5); // æå– HH:MM
                
                if (endTime && !endTime.includes('00:00:00')) {
                    const endTimeStr = endTime.split(' ')[1]?.substring(0, 5);
                    return `${displayHint} ${startTimeStr} - ${endTimeStr}`;
                }
                
                return `${displayHint} ${startTimeStr}`;
            }
            
            // å…¶ä»–é€»è¾‘...
            return 'é»˜è®¤æ˜¾ç¤º';
        }
        
        // æµ‹è¯•ç”¨ä¾‹
        const testCases = [
            {
                name: 'æœ¬å‘¨æœ«ï¼ˆæ— å…·ä½“æ—¶é—´ï¼‰',
                startTime: '2025-11-22 00:00:00',
                endTime: '2025-11-23 00:00:00', 
                isAllDay: false,
                displayHint: 'æœ¬å‘¨æœ«',
                expected: 'æœ¬å‘¨æœ«'
            },
            {
                name: 'æœ¬å‘¨æœ«ï¼ˆæœ‰å…·ä½“æ—¶é—´ï¼‰',
                startTime: '2025-11-22 14:00:00',
                endTime: '2025-11-23 18:00:00',
                isAllDay: false,
                displayHint: 'æœ¬å‘¨æœ«',
                expected: 'æœ¬å‘¨æœ« 14:00 - 18:00'
            },
            {
                name: 'æœ¬å‘¨æœ«å…¨å¤©',
                startTime: '2025-11-22 00:00:00',
                endTime: '2025-11-23 00:00:00',
                isAllDay: true,
                displayHint: 'æœ¬å‘¨æœ«',
                expected: 'æœ¬å‘¨æœ«'
            },
            {
                name: 'nullæ—¶é—´ï¼ˆæ—§é—®é¢˜ï¼‰',
                startTime: '2025-11-22 00:00:00',
                endTime: null,
                isAllDay: false,
                displayHint: null,
                expected: 'ä¸åº”è¯¥æ˜¾ç¤º00:00'
            }
        ];
        
        let html = '<h2>æµ‹è¯•ç»“æœ:</h2>';
        testCases.forEach((test, index) => {
            const result = formatRelativeTimeDisplay(
                test.startTime, 
                test.endTime, 
                test.isAllDay, 
                null, 
                test.displayHint
            );
            
            const isCorrect = result === test.expected || test.expected === 'ä¸åº”è¯¥æ˜¾ç¤º00:00';
            html += `
                <div style="margin: 10px 0; padding: 10px; border: 1px solid ${isCorrect ? 'green' : 'red'};">
                    <h3>${test.name}</h3>
                    <p><strong>è¾“å…¥:</strong> startTime=${test.startTime}, displayHint="${test.displayHint}"</p>
                    <p><strong>æœŸæœ›:</strong> ${test.expected}</p>
                    <p><strong>å®é™…:</strong> ${result}</p>
                    <p><strong>çŠ¶æ€:</strong> ${isCorrect ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}</p>
                </div>
            `;
        });
        
        document.getElementById('results').innerHTML = html;
        
        console.log('æµ‹è¯•å®Œæˆï¼Œè¯·æŸ¥çœ‹ç»“æœ');
        
    </script>
</body>
</html>